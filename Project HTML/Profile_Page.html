<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <link rel="stylesheet" href="css/Profile_Page.css">
    <style>
    body{
        background-image: url('https://media.istockphoto.com/photos/reserved-sign-on-restaurant-table-with-bar-background-picture-id912129754?k=20&m=912129754&s=612x612&w=0&h=1hn7DA0tG1c4Ujw6_2Dei0rGasEXfNRxrmuSi8CLMi4=');
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: 100% 100%;
        color: red;
    }
</style>
</head>

<script>
    function creditInfo() {
    var checkBox = document.getElementById("credit");    
    var creditnum = document.getElementById("crednum");
    var creditdate = document.getElementById("creddate");  
    var creditcode = document.getElementById("credcode");
    if (checkBox.checked == true){
        creditnum.style.display = "block";
        creditdate.style.display = "block";
        creditcode.style.display = "block";  
        }  
    else{
        creditnum.style.display = "none";
        creditdate.style.display = "none";
        creditcode.style.display = "none";
    } 
    }

    function myFunction() {
        var checkBox = document.getElementById("myCheck");  
        var textShip = document.getElementById("ShippingAd");  
        var textBil = document.getElementById("BillingAd");  
        if (checkBox.checked == true){
                textBil.value=textShip.value;  
        } else {
                textBil.value="";
        }
    }

    

    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        }

    window.onload = function() {

        let name = decodeURIComponent(getCookie('name'));
        let phone = decodeURIComponent(getCookie('phone'));
        let ShippingAd = decodeURIComponent(getCookie('home_address'));
        let BillingAd = decodeURIComponent(getCookie('billing_address'));
        let DineNum = decodeURIComponent(getCookie('preferred_diner'));
        let crednum = decodeURIComponent(getCookie('credit_card_number'));
        let creddate = decodeURIComponent(getCookie('credit_card_expiration'));
        let credcode = decodeURIComponent(getCookie('credit_card_cvv'));

        document.getElementById('name').value = name ? name : '';
        document.getElementById('phone').value = phone ? phone : '';
        document.getElementById('ShippingAd').value = ShippingAd ? ShippingAd : '';
        document.getElementById('BillingAd').value = BillingAd ? BillingAd : '';
        document.getElementById('dinerNum').value = DineNum ? DineNum : '';
        document.getElementById('crednum').value = crednum ? crednum : '';
        document.getElementById('creddate').value = creddate ? creddate : '';
        document.getElementById('credcode').value = credcode ? credcode : '';
    }

</script>


<body >
    <div class = "navigator">
        <a class = "reservation" href="/reservation">Reservation</a>
    </div>
    <div class = "header">
        <h1>Account Overview</h1>
    </div>
    <form method="POST" action="/updateProfile" >
        <div class = "container">
            <div class = "userName">
                <h2>Name: </h2>
                <input type="text" id="name" name="name" placeholder="Name" size="50" required><br><br>
            </div>
            <div class = "phoneNumber">
                <h2>Phone Number: </h2>
                <input type="number" id="phone" name="phone" placeholder="Phone" style="width: 170px;" required><br><br>
            </div>
            <div class = "mailAddress" \>
                <h2>Address: </h2>
                <textarea id="ShippingAd" name="address" placeholder="Address, City, State, Zip Code" size = "100" required></textarea><br/>
            </div>
            <div class = "billuserName">
                <h2>Billing Address: </h2>
                <input type="checkbox" id="myCheck" onclick="myFunction()">  
                <label for="myCheck">Same as Shipping Address:</label>   
                <br/>
                <textarea id="BillingAd" placeholder="Address, City, State, Zip Code" size = "100" required></textarea><br/>
            </div>
            <div class = "dinerNumber" id = "dinerNum">
                <h2>Preffered Diner #: </h2> 
                <input type = "Number" for="dinerNum">
            </div>
            <div class = "earnedPoints">
                <h2>Earned Points: </h2>
            </div>
            <div class = "paymentMethod">
                <h2>Prefered Payment Method: </h2>
                <input type="checkbox" id="cash" >  
                <label id="cashcheck">Cash</label>   
                <br/>
                <input type="checkbox" id="credit" onclick="creditInfo()">  
                <label id="creditcheck">Credit</label> 
                <input type="text" id="crednum" placeholder="Card Number" size="20" style="display: none">
                <input type="text" id="creddate" placeholder="Expiration Date(MMYYYY)" size="20" style="display: none">
                <input type="text" id="credcode" placeholder="CVV (3 digit back of card)" size="20" style="display: none"><br>  
                <input type="checkbox" id="check">  
                <label id="checkcheck">Check</label>   
                <br/>
            </div>
        <br>
        <button class="button" type="submit">Save</button>
    </form>
    </div>
</body>
</html>